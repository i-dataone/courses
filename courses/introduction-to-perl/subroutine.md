# サブルーチン

## サブルーチンとは

Perlサブルーチンはユーザーが定義する関数です。サブルーチンは繰り返されるコードを減らし、プログラムを読みやすくすることができます。

## サブルーチンの定義

サブルーチンはプログラムのどこにでも置くことが可能で、書き方は以下の通りです：

```Perl
 sub サブルーチン名{
   処理;
 }
```

## サブルーチンの呼び出し

サブルーチンを呼び出しの書き方は以下の通りです：

```Perl
 サブルーチン名;
```

です。
バージョンPerl 5.0以上のサブルーチンの呼び出し方は以下の通りです：

```Perl
 &サブルーチン名;
```

例：

```Perl
sub Number{
 print"1234567\n"
}

Number();
```

これを実行すると、結果は：

```1234567```

となります。

## サブルーチンの引数

サブルーチンを呼び出す時、値を渡して、サブルーチンで処理します。ここの値は**引数**といいます。引数は配列`@_`に格納されています。書き方は以下の通りです。

```Perl
&サブルーチン名(引数a, 引数b, ...);
sub サブルーチン名{
  処理;
}
```

## サブルーチンの戻り値

サブルーチンは、他のプログラミング言語と同様に、`return`命令を使って関数値を返すことができます。`return`命令を使ってない場合、サブルーチンの最後の命令が戻り値として使用されます。

例えば

```Perl

sub add{
    # ここで引数を@_で格納します。
  my ($a, $b) = @_;

  $a + $b;
}
# ここで10と20は引数です。
my $sum = &add(10, 20);
print "$sum\n";
```

と実行すると、結果は

```30```

となります。

## return文

前に書いた通り、`return`命令を使って関数値を返すことができます。ゆえに、まえの命令は以下のように書けます。

```Perl

sub add{
  
  my ($a, $b) = @_;

  return $a + $b;
}
my $sum = &add(10, 20);
print "$sum\n";
```

これを実行すると、結果

```30```

となります。

## サブルーチンに引数を渡す

Perlサブルーチンは、他のプログラミングと同様に複数の引数を受け入れることができます。サブルーチン引数は、特別な配列@_でマークされます。
したがって、サブルーチンの最初の引数は`$ _ [0]`、2番目の引数は`$ _ [1]`となります。
引数がスカラー型か配列型かに関係なく、ユーザーが引数をサブルーチンに渡すとき、perlはデフォルトで参照によりパ引数を呼び出します。
よって、まえの命令は以下のように書けます。

```Perl

sub add{
  $_[0]+$_[1];  
}
my $sum = &add(10, 20);
print "$sum\n";
```

これを実行すると、結果は

```30```

となります。

### サブルーチンにリストを渡す

スカラーおよび配列パラメーターを渡す場合は、リストを最後の引数に配置する必要です。

例：

```Perl

sub List{
   my @list = @_;
   print "リストは : @list\n";
}
$a = 5;
@b = (1, 2, 3, 4);

List($a, @b);
```

これを実行すると、結果は

```リストは : 5 1 2 3 4```

となります。

### サブルーチンにハッシュを渡す

ハッシュをサブルーチンに渡すと、ハッシュは@_にコピーされて、ハッシュはキーと値の組み合わせのリストに展開されます。

例：

```Perl
sub Hash{
   my (%hash) = @_;
   foreach my $key ( keys %hash ){
      my $value = $hash{$key};
      print "$key : $value\n";
   }
}
%hash = ('name' = 'Tom', 'age' = 18);

Hash(%hash);
```

これを実行すると、結果は

```name : Tom
age : 18
```

となります。
