# サブルーチン

## サブルーチンとは

Perlサブルーチンはユーザーが定義する関数です。サブルーチンは繰り返されるコードを減らし、プログラムを読みやすくすることができます。

## サブルーチンの定義

サブルーチンはプログラムのどこでも置くことが可能、書き方は以下のようにです。
<!--
「どこでも置くことが可能、」
→「どこにでも置くことが可能で、」

「以下のようにです」→「以下の通りです」
-->

```Perl
 sub サブルーチン名{
   処理;
 }
```

## サブルーチンの呼び出し

サブルーチンを呼び出しの書き方は以下のようにです。

```Perl
 サブルーチン名;
```

です。
バージョンPerl 5.0以上のサブルーチンの呼び出し方は：

```Perl
 &サブルーチン名;
```

です。
例えば：

```Perl
sub Number{
 print"1234567\n"
}

Number();
```

と実行すると、結果は：

```1234567
```

となります。

## サブルーチンの引数

サブルーチンを呼び出す時、値を渡して、サブルーチンで処理します。ここの値は引数といいます。引数は配列`@_`に格納されています。
書き方は以下の通りです。

```Perl
&サブルーチン名(引数a, 引数b, ...);
sub サブルーチン名{
  処理;
}
```

## サブルーチンの戻り値

サブルーチンは、他のプログラミング言語と同様に、`return`命令を使って関数値を返すことができます。
`return`命令を使ってない場合、サブルーチンの最後の命令が戻り値として使用されます。

例えば

```Perl

sub add{
    # ここで引数を@_で格納します。
  my ($a, $b) = @_;

  $a + $b;
}
# ここで10と20は引数です。
my $sum = &add(10, 20);
print "$sum\n";
```

と実行すると、結果は：

```30
```

となります。


## return文

前の言った通り、`return`命令を使って関数値を返すことができます。というわけで、まえの命令は以下のように書けます。
<!--
→「前に書いた通り、」

「というわけで」
→口語では可能ですがカジュアルです。「そのため」「よって」「ゆえに」などが代案です。
-->
```Perl

sub add{
  
  my ($a, $b) = @_;

  return $a + $b;
}
my $sum = &add(10, 20);
print "$sum\n";
```

と実行すると、結果は：

```30
```

となります。

## サブルーチンに引数を渡す

Perlサブルーチンは、他のプログラミングと同様に複数の引数を受け入れることができます。サブルーチン引数は、特別な配列@_でマークされます。
したがって、サブルーチンの最初の引数は`$ _ [0]`、2番目の引数は`$ _ [1]`となります。
引数がスカラー型か配列型かに関係なく、ユーザーが引数をサブルーチンに渡すとき、perlはデフォルトで参照によりパ引数を呼び出します。
というわけで、まえの命令は以下のように書けます。

```Perl

sub add{
  $_[0]+$_[1];  
}
my $sum = &add(10, 20);
print "$sum\n";
```

と実行すると、結果は：

```30
```

となります。

### サブルーチンにリスクを渡す
<!--
→リスト
-->
スカラーおよび配列パラメーターを渡す場合は、リストを最後の引数に配置する必要です。
例えば：

```Perl

sub List{
   my @list = @_;
   print "リスクは : @list\n";
}
$a = 5;
@b = (1, 2, 3, 4);

List($a, @b);
```

と実行すると、結果は：

```リスクは : 5 1 2 3 4
```

となります。

### サブルーチンにハッシュを渡す

ハッシュをサブルーチンに渡すと、ハッシュは@_にコピーされて、ハッシュはキーと値の組み合わせのリストに展開されます。
例えば：

```Perl
sub Hash{
   my (%hash) = @_;
   foreach my $key ( keys %hash ){
      my $value = $hash{$key};
      print "$key : $value\n";
   }
}
%hash = ('name' = 'Tom', 'age' = 18);

Hash(%hash);
```

と実行すると、結果は：

```name : Tom
age : 18
```

となります。
