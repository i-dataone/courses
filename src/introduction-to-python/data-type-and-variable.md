# データ型と変数

## 変数

Pythonでは、変数は任意のデータ型の変数名で表されます。変数名は、大文字と小文字の英語、数字、アンダースコア`_`またそれらの組み合わせです。数字で始めることはできません。等号`=`は、変数に値を割り当てるために使用されます。

```python
a_1 = 1
```

例として整数変数を宣言します。Pythonで新しい変数を宣言するとき、型宣言の必要がありません、コンパイラが自動的に変数値の型を判断します。

```python
a = 1
b, c = 1, "hello"
```

例の二行目には複数のオブジェクトに対して異なるタイプの変数を同時に指定できます。

静的型付け言語とは異なり、動的型付け言語は変数宣言の後でも変数のデータ型を変更できます。

```python
a = 123     #整数
a = 'Hello' #文字列
print(a)
```

Output: `Hello`

## 標準データ型

Pythonには次のような<!--若干の⇒次のような-->標準データ型があります：Numbers、String、Boolean、List、Tuple、Dictionary、Set。

### 数字型Number

Pythonは整数型と浮動小数点型を処理できます。具体的には三つの種類があります：

- int
- float
- complex

```python
a=1000      # 整数型
b=1000.00   # 浮動小数点型
c=1.23e+5   # 科学表記の123000
d=2.25j     # 複素数
```

Pythonは実部と虚部で構成される複素数型を処理できます。`a+bj`または`complex(a,b)`として表します。実部aと虚部bの両方が浮動小数点型です

### 文字列型String

文字列は一重引用符`'`または二重引用符`"`で囲まれた任意のテキストです。文字列の中に引用符を含める場合、エスケープ文字`\`を使います。
`"You\'re learning python."`
`You're learning python`が出力されます。

それに、Pythonではrを使ってエスケープせずに直接に文字列を表すこともできます。
例えば

```python
print('\\\t\\')
```

は`\	\`を出力し、

```python
print(r'\\\t\\')
```

は`\\\t\\`を出力します。

Pythonの文字列型はユニコード型のため、文字の16進エンコーディングがわかっている場合、`\u`をつけて文字を出力できます

```python
print("こちらは\u65e5\u672c")
```

Output: `こちらは日本`

#### スライス操作

Python文字列型の便利な点の一つは、文字列インデックスに従って直接<!--"に"削除-->スライス操作できることです：

文字列リストには2つのインデックス順序があります。
左から右へのインデックスは、デフォルトの0から始まります。上限は、文字列の長さから1を引いたものです。

右から左へのインデックスはデフォルトの-1で始まり、下限は文字列の長さにマイナス(-)をつけた数です。
<!--
「最大範囲」
→「下限」

「文字列の長さの負の数」
→「文字列の長さにマイナス（-）を付けた数」など。
-->

部分文字列を取得したい場合は、[開始位置：終了位置]を使用して、対応する文字列を切り取り<!--取りきり⇒切り取り-->できます。ここで、インデックスは0から始まり、左からには正数を使い、右からには負の数を使用します。 マークは、開始または終了を示すために空にすることができます。

[Head：tail]取得された部分文字列には、開始位置の文字が含まれますが、終了位置の文字は含まれません。

例：

```python
s = 'Hello,world!!!'
print(s[0:5])
```

Output: `Hello`

```python
print(s[-3:])
```

Output: `!!!`

また三個目のパラメータを導入することができます。これは値を取る間隔です。

```python
print(s[::2])
```

Output: `Hlowrd!`

-1の場合は逆順にします。

```python
print(s[::-1])
```

Output: `!!!dlrow,olleH`

#### フォーマッティング

- 文字列に多変数を代入して出力するには`%`を使います。例：

```python
print('%s, you are in the Class %d.' % ('Alice', 2))
```

Output: `Alice, you are in the Class 2.`

%sは文字列で置き換えることを意味し、%dは整数で置き換えることを意味します。順序は正確に対応します。変数が一つしかない場合は括弧を省略できます。

一般的なプレースホルダーは

|  プレースホルダー | 置き換える内容  |
| ------------ | ------------ |
|  %s | 文字列  |
| %f  |  浮動小数点数 |
| %d  | 符号付き整数  |
| %e  |  浮動小数点数（科学表記） |
| %x  | 16進整数  |

変数の型が不明な場合、％sは任意のデータ型を文字列に変換できます。

%を出力する場合、エスケープ文字として前にもう一つ`%`を追加します。引用符などには`\`を使用します

- もう一つの方法は文字列の`format`メソッドを使用することです。

例：

```python
print('Hello, {0}\'s number is {1:04d}.'.format('Bob', 2))
```

Output:`Hello, Bob's number is 0002.`

### ブール型Boolean

ブール値には、TrueとFalseの2つの値があります。and、or、notで論理演算を操作できます。

```python
>>> True and False
False
>>> True or False
True
>>> not 1 > 2
True
```

### リスト型List

リストは`[]`を使って表されるPythonの最も一般的な複合データ型です。
変数[head：tail]を使用してリスト内の値をカットすることもできます。開始位置のデフォルトは0で終了位置のデフォルトは-1です。前述の文字列は本質的に複数の文字のリストです。

- `len()`関数はリストの要素の数を取得できます。

- インデックスを使用してリスト内の要素を操作します。

```python
list1 = ['Apple', 'Banana', 1, 2]
print(list1[0], list1[-1])

```

Output: `Apple 2`

- 多次元リスト

リストはネストできます。
例：
  
```python
list1 = ['Apple', 'Banana', [1, 2], 3]
print(list1[2][0])

```

Output: `1`

- Listはサイズが可変な順序付きリストなので、`append()`でリストの最後に要素を追加できます。`insert(index,element)`でリストの指定された位置に要素を追加できます。

- pop(index)、del()で指定された位置の要素を削除できます。

```python
list1 = ['Apple', 'Banana', 1, 2]
del(list1[2])
list1.pop(2)
print(list1)
```

Output: `['Apple', 'Banana']`

### タプル型Tuple

タプルはリストに非常に似ていますが、タプルの方は不変のため、いったん初期化されると、変更できません。

```python
tuple1 = ('Apple', 'Banana', 'melon')
print(tuple1[0])

```

Output: `Apple`

このタプルを追加または削除することはできませんが、要素を取り出すことはできます。

一つの注意すべき点は、タプルで整数が1つだけ定義されている場合です：

```python
tuple1 = (1)
```

このtuple1変数はタプル型ではなく、整数型として定義されています。括弧は演算子として扱われました。その場合、明確にするためにカンマを追加する必要があります：

```python
tuple1 = (1,)
```

誤解しないように、Pythonは要素が1つだけのタプルを出力するときにコンマも追加します。

### 辞書型Dictionary

Pythonにはディクショナリdict集合型が組み込まれています。他の言語ではmapとも呼ばれます。key-valueでストレージを使用し、検索速度がはやいです。
キーはクエリのインデックスとして使用されるため、ユニークにする必要があります。キーは不変でなければならないので、数値、文字列、またはタプルをできますが、リストは使用できません（リストの可変の属性）。

以下はdictの例です：

```python
dict1 = {'Apple': 1, 'Banana': 2, 'Cherry': 3}
print(dict1['Apple'])

dict1['Apple'] = 5    # 更新
dict1['Durian'] = 4   # 追加
```

Output: `1`

`get(key)`関数でも<!--も⇒でも-->キーの値を得られます。

### 集合型Set

Set型の変数には値が重複する要素は<!--が⇒は-->存在できません。辞書型に似ていますがvalueがなく、keyのみがあります。新しいSetを宣言するには、リスト型を提供することが必要です。またSet型は順序を付けられたコレクション型ではありません。重複要素はSet内で自動的に上書きされます。

```python
set1 = set([1, 1, 2, 3])
print(set1)
```

Output: `{1, 2, 3}`

`add(element)`を使って要素をSetに追加できます。重複元素を追加する場合はエラーは<!--が⇒は-->出てきませんが、追加できません。`remove(element)`で要素を削除できます。

Setの原理はdictと同じなので、可変型を入れることができません。次の例では、リスト要素を入れるとエラーがでます。

```python
set1 = set([[1,2,3], 1, 2, 3])
print(set1)
```

Output:

```python
Traceback (most recent call last):
  File ..., line 1, in <module>
    s=set([[1,2,],1,2,3])
TypeError: unhashable type: 'list'
```

## データ型変換

Pythonにはデータ型を自動的に変換する関数があります。一般的な方法は以下のようになります。

|  関数 |  説明 |
| ------------ | ------------ |
| int(x [,base ])  |  xをbase進数（デフォルト10進数）の整数に変換します |
| float(x )  |  xを浮動小数点数に変換します |
| str(x )  | xを文字列に変換します  |
| eval(x )  |  文字列内の有効なPython式を処理し、結果を返します |
| tuple(x )  |  xをタプルに変換します |
| list(x ) | xをリストに変換します  |
| type(x ) | xのデータ型を照会します  |

`input()`でキーボードから入力したパラメータは文字列型です。パラメータを計算する場合は、パラメータを数値型に変換する必要があります。文字列は`int()`関数で整数型に変換できます。

```python
input1 = '1'
input2 = '2'
print(type(input1))
print(int(input1)+int(input2))
```

Output:

```python
<class 'str'>
3
```

`eval()`を使う場合：

```python
input1 = '1'
input2 = '2'
print(eval(input1+"+"+input2))
print(eval(input1+input2))
```

Output:

```python
3
12
```

文字列の本質は文字のリストであるため、文字列を直接に文字リストに変換することもできます。

```python
str1 = 'Hello'
print(list(str1))
```

Output:
`['H', 'e', 'l', 'l', 'o']`

## 一般的な演算子

他のプログラミング言語と同じく、Pythonにはさまざまな演算子があります。

### 算術演算子

------------

| 演算子  |  説明 |
| ------------ | ------------ |
| +,-,*,/  | 加減乗除  |
|  % | モジュロ  |
|  ** |  べき乗 |
|  // | 切り捨て除算 |

注意すべきなのは、`/`で得られた結果は正確な浮動小数点型、整数部分のみを取得する場合（切り捨て）に`//`を使うことです。

例：

```python
>>> 7/2
3.5
>>> 7//2
3
>>> -7//2
-4
```

`+`、`*`演算子はコレクションに適用できます。
例：

```python
list1 = [1, 2, 3]
list2 = [4, 5, 6]
print(list1*2)      #list1を二回で出力する
print(list1+list2)  #list1とlist2の組み合わせのリストを出力する
```

Output:

```python
[1, 2, 3, 1, 2, 3]
[1, 2, 3, 4, 5, 6]
```

### 比較演算子

------------

比較演算子は2つの変数の値を比較します。戻り値はブール型です。

| 演算子  | 説明  |
| ------------ | ------------ |
|  == |  等しい |
|  != | 等しくない  |
| > / <  | より大きい/より小さい  |
| >= / <=  | 等しいか大きい/  等しいか小さい |

コレクション型に適用できますが、例を挙げて結果を観察します。

```python
list1 = [1, 2, 3]
list2 = [1, 2, 3]
list3 = [1, 2, 2, 2]
list4 = [1, 2, 'Hi']
print(list1==list2)
print(list1>list3)
print(list1>list4)
```

Output:

```python
True
True
Traceback (most recent call last):
  File ..., line 7, in <module>
    print(list1>list4)
TypeError: '>' not supported between instances of 'int' and 'str'
```

一個目のprint()関数はlist1とlist2の要素が等しいかどうかを判別します。等しいのでTureを返します；

二個目のprint()関数はlist1がlist2より大きいかどうかを判別します。評価するのはリストのサイズでも合計の大きさでもなく、リストの要素を一個ずつ比較します。二つの要素が等しくない関係を判断すると、結果をすぐに返します；

三個目のprint()関数はlist1がlist4より大きいかどうかを判別します。3番目の要素のタイプが異なるため、エラーが出力されました。
エラーを回避するため、コレクションに比較演算子を使う場合、等しい関係だけを判断します。

### ビット演算子

------------

ビット演算子は、数値をバイナリとして計算することです。

| 演算子  |  説明 |
| ------------ | ------------ |
| &  |  AND演算子：2つの対応するビットが1の場合、ビットの結果は1、それ以外の場合は0 |
| &#124; |  OR演算子：2つの対応するビットの1つが1である限り、結果ビットは1です。それ以外の場合は0 |
| ^  |  XOR演算子：2つの対応するビットが異なる場合、結果は1 |
| ~  | 反転演算子：各バイナリビットを反転します。つまり、1を0に、0を1に変更します  |
| <<  | 左シフト演算子：バイナリビットはすべて数桁左にシフトされ、<<の右側の桁はシフトされる桁数を指定し、上位桁は破棄され、下位桁は0で埋められます  |
| >>  |  右シフト演算子：>>の左側にすべてのバイナリビットを数桁右にシフトし、右側の数字はシフトする桁数を指定します |

### 論理演算子

------------

ステートメントの論理関係を判別する演算子です。ブール型を返します。

|  演算子 | 説明  |
| ------------ | ------------ |
| and  | 左側がFalseの場合、左側and右側はFalseを返し、それ以外の場合は右側の計算値を返します |
| or  |  左側がゼロ以外の場合は左側の値を返し、それ以外の場合は右側の計算値を返します。 |
| not |  Trueの場合、Falseを返します。 Falseの場合、Trueを返します。 |

例：

```python
a = 10
b = 20
c= False
print(a and b)
print(c or a)
print(not c)
```

Output:

```python
20
10
True
```

### 他の演算子

------------

#### in演算子
  
文字列、リスト、タプルに適用され、要素がコレクションに含まれているかどうかを判断します。

| 演算子  | 説明  |
| ------------ | ------------ |
| in | 指定された集合で値が見つかった場合はTrueを返し、そうでない場合はFalseを返します  |
| not in  | 指定された集合で値が見つからない場合はTrueを返し、そうでないの場合はFalseを返します。  |

```python
a = 1
b = [1, 2, 3]
print(a in b)
```

Output:

```python
True
```

#### is演算子

2つのオブジェクトのメモリ内の参照を比較するために使用されます。

| 演算子  | 説明  |
| ------------ | ------------ |
| is | 2つの識別子が同じオブジェクトを参照しているかどうかを判断します  |
| is not | 2つの識別子が異なるオブジェクトを参照しているかどうかを判断します  |

例：

```python
a=20;b=20;c=30;d=b
print(a is d)
print(a is not c)
```

Output:

```python
True
True
```
