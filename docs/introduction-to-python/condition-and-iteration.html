<!DOCTYPE html><html lang="ja"><head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../style.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <title>条件分岐と繰り返し処理</title>
    </head>
    <body><h1 id="条件分岐と繰り返し処理">条件分岐と繰り返し処理</h1>
<h2 id="条件分岐">条件分岐</h2>
<p>Pythonのif文の基本的な形式は以下のようになります：</p>
<pre><code class="python">if condition：
    statements</code></pre>
<p>if条件の最後にコロンを付け、<!--ます。⇒、-->条件内容をインデントする必要があります。
ifの条件が成立するのは条件値が非零または非空の場合であり、データ型はブール型(True, False)に限定されません。</p>
<p>例:</p>
<pre><code class="python">a = <span class="hljs-number">20</span>
<span class="hljs-keyword">if</span> a :
    print(<span class="hljs-string">'a is %d'</span> % a)</code></pre>
<p>Output: <code>a is 20</code></p>
<p>elseを追加することもできます。if判定がFalseまた0の場合はelseの内容を実行します。</p>
<pre><code class="python"><span class="hljs-keyword">if</span> 条件<span class="hljs-number">1</span>:
    条件<span class="hljs-number">1</span>が満たされるときに実行します。
<span class="hljs-keyword">else</span>:
    条件<span class="hljs-number">1</span>が満たされないときに実行します。</code></pre>
<p>判定条件が複数の場合はelifを使います。</p>
<pre><code class="python"><span class="hljs-keyword">if</span> 条件<span class="hljs-number">1</span>:
    条件<span class="hljs-number">1</span>が満たされたときに実行します。
<span class="hljs-keyword">elif</span> 条件<span class="hljs-number">2</span>:
    条件<span class="hljs-number">2</span>が満たされたときに実行します。
....
<span class="hljs-keyword">else</span>:
    すべての条件が満たされないときに実行します。</code></pre>
<h2 id="繰り返し処理">繰り返し処理</h2>
<h3 id="for文">for文</h3>
<p>forループは、リストや文字列などのシーケンスを繰り返し処理を行う時に利用できます。Pythonのforの構文は次のようになります。</p>
<pre><code class="python">for item in sequence:
   statements</code></pre>
<p>リストの場合は次のコード例のようになります。fruitはfor内に作成された一時変数であり、リストで繰り返される各アイテムを表します。</p>
<p>例：</p>
<pre><code class="python">fruits = [<span class="hljs-string">'Apple'</span>,<span class="hljs-string">'Banana'</span>,<span class="hljs-string">'Melon'</span>]
<span class="hljs-keyword">for</span> fruit <span class="hljs-keyword">in</span> fruits:
   print(fruit)</code></pre>
<p>Output:</p>
<pre><code class="python">Apple
Banana
Melon</code></pre>
<p>複数の要素の場合：</p>
<pre><code class="python">list1 = [[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>]]
<span class="hljs-keyword">for</span> x,y <span class="hljs-keyword">in</span> list1:
   print(x, y)</code></pre>
<p>Output:</p>
<pre><code class="python">1 2
3 4
5 6</code></pre>
<p>シーケンスインデックスでトラバースすることもできます。Pythonには一連の整数を生成する<code>range()</code>関数を提供します。<code>len()</code>はシーケンスの長さを出力します。</p>
<pre><code class="python">fruits = [<span class="hljs-string">'Apple'</span>,<span class="hljs-string">'Banana'</span>,<span class="hljs-string">'Melon'</span>]
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(fruits)):
   <span class="hljs-built_in">print</span> (fruits[i])</code></pre>
<p>Output:</p>
<pre><code class="python">Apple
Banana
Melon</code></pre>
<p>Pythonの組み込みenumerate関数は、リストをインデックスと要素のペアに変換し、インデックスと要素をforループで同時に出力できます。</p>
<pre><code class="python">fruits = [<span class="hljs-string">'Apple'</span>,<span class="hljs-string">'Banana'</span>,<span class="hljs-string">'Melon'</span>]
<span class="hljs-keyword">for</span> key,value <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fruits):
    print(key,value)</code></pre>
<pre><code class="python">0 Apple
1 Banana
2 Melon</code></pre>
<p>一つの便利なところは、新しい集合変数を宣言するときにforおよびif文を使用できることです。例：</p>
<pre><code class="python">list1 = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span> ]
list2 = [ i*<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> list1 <span class="hljs-keyword">if</span> i%<span class="hljs-number">2</span>==<span class="hljs-number">0</span> ]
print(list2)</code></pre>
<p>Output:<code>[4, 8]</code></p>
<p>*if条件はforの前におく場合は、elseを追加する必要があります。</p>
<pre><code class="python">list1 = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span> ]
list2 = [ i*<span class="hljs-number">2</span> <span class="hljs-keyword">if</span> i%<span class="hljs-number">2</span>==<span class="hljs-number">0</span> <span class="hljs-keyword">else</span> i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> list1]
print(list2)</code></pre>
<p>Output:<code>[1, 4, 3, 8, 5]</code></p>
<p>2重forループで二つ集合の順列を生成できます。</p>
<pre><code class="python">list1 = [ <span class="hljs-string">'Alice'</span>, <span class="hljs-string">'Bob'</span>]
list2 = [ <span class="hljs-string">'Claine'</span>, <span class="hljs-string">'David'</span>]
list3 = [m + <span class="hljs-string">'&amp;'</span> + n <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> list1 <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> list2]
print(list3)</code></pre>
<p>Output:<code>['Alice&amp;Claine', 'Alice&amp;David', 'Bob&amp;Claine', 'Bob&amp;David']</code></p>
<h4 id="ジェネレータ">ジェネレータ</h4>
<p>リストを生成する関数により、イテレータでリストを直接作成できます。pythonのジェネレータは指定するアルゴリズムに従って要素を計算できます。ループの過程で後続の要素を計算し、完全なリストを作成する必要がなくなり、メモリを節約できます。</p>
<p>ジェネレータの例は次のようになります：</p>
<pre><code class="python">g = (x*<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>))
print(g)</code></pre>
<p>Output:<code>&lt;generator object &lt;genexpr&gt; at 0x00000000025094F8&gt;</code></p>
<p><code>print()</code>の出力はジェネレータの<!--"の"追加-->内容ではなくメモリアドレスです。要素を1つずつ出力したい場合はループ内に<code>next()</code>関数で次のジェネレータの戻り値を取得することです。</p>
<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>gen = (x*<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>))
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">next</span>(gen)
<span class="hljs-number">0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">next</span>(gen)
<span class="hljs-number">1</span></code></pre>
<p>またはforループを使用します：</p>
<pre><code class="python">gen = (x*<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>))
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> g:
   print(i, end=<span class="hljs-string">' '</span>)</code></pre>
<p>Output:<code>0 2 4 6 8 </code></p>
<p>ジェネレータの一つの特徴はyield文です。</p>
<p>例の<code>odd()</code>関数を定義して実行します。</p>
<pre><code class="python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">odd</span>():</span>
    print(<span class="hljs-string">'No.1'</span>)
    print(<span class="hljs-string">'No.3'</span>)
    print(<span class="hljs-string">'No.5'</span>)
odd3()</code></pre>
<p>Output:</p>
<pre><code class="python">No.1
No.2
No.3</code></pre>
<p>この関数にyieldを追加できます。これは<code>odd()</code>にジェネレーターのプロパティを与えることです。</p>
<pre><code class="python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">odd</span>():</span>
    print(<span class="hljs-string">'No.1'</span>)
    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>         <span class="hljs-comment">#一番目yield:return=1</span>
    print(<span class="hljs-string">'No.3'</span>)
    <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>         <span class="hljs-comment">#二番目yield:return=3</span>
    print(<span class="hljs-string">'No.5'</span>)
    <span class="hljs-keyword">yield</span> <span class="hljs-number">5</span>         <span class="hljs-comment">#三番目yield:return=5</span></code></pre>
<p>オブジェクトを生成してループの結果を観察します。</p>
<pre><code class="python">o=odd()
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> o:
   print(i)</code></pre>
<p>Output:</p>
<pre><code class="python">No.1
1
No.3
3
No.5
5</code></pre>
<p>yieldはジェネレータのブレークポイントとして使用されます。実行の時にyield文を検出するとループが中断され、yieldの後ろの値を返します。<code>next()</code>またはイテレーターでもう一度ジェネレータを呼び出すと、中断したところから引き続き実行します。</p>
<h3 id="while文">while文</h3>
<p>while文では、条件が満たされる限り、ループは継続されます。条件が満たされない時にループは終了します。whileの構文は次のようになります。</p>
<pre><code class="python"><span class="hljs-keyword">while</span> condition：
    statements</code></pre>
<p>例：</p>
<pre><code class="python">i = <span class="hljs-number">0</span>
<span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> i &lt; <span class="hljs-number">5</span>:
    <span class="hljs-built_in">sum</span>+=i
    i+=<span class="hljs-number">1</span>
print(<span class="hljs-built_in">sum</span>)</code></pre>
<p>Output:<code>10</code></p>
<h2 id="break、continueとelse">break、continueとelse</h2>
<p>whileおよびforループにbreak文とcontinue文を使用できます。使う場合には、ループに新しい条件判断ステートメントを追加する必要があります。</p>
<h3 id="break">break</h3>
<p>breakはループを終了するために使用されます。</p>
<p>例：</p>
<pre><code class="python">i = <span class="hljs-number">0</span>
<span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> i &lt; <span class="hljs-number">5</span>:
    <span class="hljs-keyword">if</span> i &gt; <span class="hljs-number">3</span>:
        <span class="hljs-keyword">break</span>
    <span class="hljs-built_in">sum</span>+=i
    i+=<span class="hljs-number">1</span>
print(<span class="hljs-built_in">sum</span>)</code></pre>
<p>Output:<code>6</code></p>
<h3 id="continue">continue</h3>
<p>continueは今のループをスキップして次のループに進みます。</p>
<p>例：</p>
<pre><code class="python">i = <span class="hljs-number">0</span>
<span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> i &lt; <span class="hljs-number">5</span>:
    i+=<span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> i == <span class="hljs-number">3</span>:
        <span class="hljs-keyword">continue</span>
    <span class="hljs-built_in">sum</span> += i
print(<span class="hljs-built_in">sum</span>)</code></pre>
<p>Output:<code>12</code></p>
<p>しかし、コードをこう書けば：</p>
<pre><code class="python">i = <span class="hljs-number">0</span>
<span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> i &lt; <span class="hljs-number">5</span>:
    <span class="hljs-keyword">if</span> i == <span class="hljs-number">3</span>:
        <span class="hljs-keyword">continue</span>
    i+=<span class="hljs-number">1</span>
    <span class="hljs-built_in">sum</span> += i
print(<span class="hljs-built_in">sum</span>)</code></pre>
<p>プログラムは無限ループに陥ります。</p>
<p>breakとcontinueを乱用しないように注意してください。ロジックを過度に分岐すれば、エラーが発生しやすくなります。 ほとんどのループでは、breakおよびcontinueを使用する必要はありません。ループ条件を書き換えるか、ループロジックを変更することにより、breakおよびcontinueを使わずに書けます。</p>
<h3 id="else">else</h3>
<p>ループ本体の後にelseを追加できます。forやwhileループが完了したとき、またbreak文を使用しなかった時に実行します。</p>
<p>例：</p>
<pre><code class="python">i = <span class="hljs-number">0</span>
<span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> i &lt; <span class="hljs-number">5</span>:
    i+=<span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> i == <span class="hljs-number">3</span>:
        <span class="hljs-keyword">continue</span>
    <span class="hljs-built_in">sum</span> += i
    print(<span class="hljs-built_in">sum</span>,end=<span class="hljs-string">","</span>)
<span class="hljs-keyword">else</span>:
    print(<span class="hljs-string">"end"</span>)</code></pre>
<p>Output:<code>1,3,7,12,end</code></p>
<h2 id="pass文">pass文</h2>
<p>passは空のステートメントであり、プログラム構造の整合性を維持します。プレースホルダーステートメントとして使用されます。</p>
<p>例：</p>
<pre><code class="python"><span class="hljs-keyword">for</span> letter <span class="hljs-keyword">in</span> <span class="hljs-string">'Hello'</span>:
   <span class="hljs-keyword">if</span> letter == <span class="hljs-string">'l'</span>:
      <span class="hljs-keyword">pass</span>
      <span class="hljs-built_in">print</span> (<span class="hljs-string">'p'</span>, end=<span class="hljs-string">' '</span>)
   <span class="hljs-built_in">print</span> (letter, end=<span class="hljs-string">' '</span>)</code></pre>
<p>Output:<code>H e p l p l o </code></p>
<p>Pythonでは、def関数が表示されることがあります。</p>
<pre><code class="python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">example</span>():</span>
    <span class="hljs-keyword">pass</span></code></pre>
<p>空の関数を定義するとエラーが発生するため、passで位置を占めます。関数の内容が未定の場合には、passがあればプログラムが正常に実行できます。</p>
</body></html>